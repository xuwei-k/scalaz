# Use Docker-based container (instead of OpenVZ)
sudo: false
dist: xenial
cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt/launchers
    - $HOME/.cache/coursier/v1

language: scala
jdk:
  - openjdk11

before_cache:
  # Tricks to avoid unnecessary cache updates
  - find $HOME/.sbt -name "*.lock" | xargs rm
  - find $HOME/.ivy2 -name "ivydata-*.properties" | xargs rm

env:
  global:
  - secure: f9sDrym/MfYK1hBBSaILMxn4VCfyzJREqpuGXhEggrdZpYTNjp8GMXrqKfla3AwVAuWCveXk9u+skUYqKQ6LTG7RdQS5PzA2I9kx8afNRA5nxMmVQjuCKYM0/aF4egY5i98tGXG0NiMO3t72XuxtR+OeWLysUVB8hoNghpOOVMw=
  - secure: PPURD7/Lj6+kqE342Ty99XhO5SR7GlrakSbZeKm5RKXS2Q5yFrexdf+UcS3KUbq6LaWnH75q+UgC2mcRMIspRmz37CtVXkGbJYp3VBYFJbmIga+w0bBVvlSw8QWIGhdz3xnOOuiEYpgeOKnAzShr59HYKG2O90jlMdt4cPRUrwg=

matrix:
  include:
  - name: graal
    script: sbt -J-XX:+UnlockExperimentalVMOptions -J-XX:+UseJVMCICompiler "project rootJVM" update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile
  - name: no-graal
    script: sbt "project rootJVM" update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile clean update compile
