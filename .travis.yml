# Use Docker-based container (instead of OpenVZ)
sudo: false
dist: xenial
cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt/launchers
    - $HOME/.cache/coursier/v1

language: scala
jdk:
  - openjdk8

before_cache:
  # Tricks to avoid unnecessary cache updates
  - find $HOME/.sbt -name "*.lock" | xargs rm
  - find $HOME/.ivy2 -name "ivydata-*.properties" | xargs rm

matrix:
  include:
  - name: scala2
    script:
    - sbt
      -J-Xmx3784m
      "++2.13.3!"
      "project rootJVM"
      update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
  - name: 0.27.0-RC1
    script:
    - sbt
      -J-Xmx3784m
      "++0.27.0-RC1!"
      "project rootJVM"
      update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
  - name: dotty-nightly
    script:
    - sbt
      -J-Xmx3784m
      "++3.0.0-M2-bin-20201031-1ab76c1-NIGHTLY!"
      "project rootJVM"
      update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
      clean update compile
